<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>말씀읽기APP</title>
  <link rel="stylesheet" href="styles.css"/>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore-compat.js"></script>

  <!-- 앱 코드 -->
  <script src="books.js" defer></script>
  <script src="firebaseConfig.js" defer></script>
  <script src="app.js" defer></script>
</head>
<body>
  <!-- 로그인 화면 -->
  <section id="screen-login" class="screen show">
    <h2>로그인</h2>
    <input id="email" type="email" placeholder="이메일"/>
    <input id="password" type="password" placeholder="비밀번호"/>
    <input id="displayName" type="text" placeholder="이름(선택)"/>
    <input id="nickname" type="text" placeholder="닉네임(선택)"/>
    <button id="btnLogin">로그인</button>
    <button id="btnSignup">회원가입</button>
  </section>

  <!-- 앱 화면 -->
  <section id="screen-app" class="screen">
    <header>
      <div id="signedIn" class="hidden">
        <span id="userName"></span>
        <img id="userPhoto" class="hidden" alt="프로필"/>
        <button id="btnSignOut">로그아웃</button>
      </div>
    </header>

    <main>
      <div id="controls">
        <select id="bookSelect"></select>
        <div id="chapterGrid"></div>
        <div id="verseGrid"></div>
      </div>

      <div id="verseView">
        <h3 id="locLabel"></h3>
        <div id="verseText"></div>
        <div id="verseCount"></div>
      </div>

      <!-- 수음레벨 막대 -->
      <div id="micLevelRow" style="margin:8px 0; display:flex; align-items:center; gap:10px;">
        <div style="font-size:0.9rem; opacity:0.9;">감지 수준</div>
        <div style="flex:1; height:8px; background:rgba(255,255,255,0.2); border-radius:9999px; overflow:hidden;">
          <div id="micBar" style="height:100%; width:0%; background:rgba(67,209,122,0.9);"></div>
        </div>
        <div id="micDb" style="min-width:52px; text-align:right; font-variant-numeric:tabular-nums;">-∞ dB</div>
      </div>

      <!-- 해당절읽음 버튼 -->
      <div style="margin:10px 0; display:flex; justify-content:flex-end;">
        <button id="btnMarkRead" style="background:#43d17a; color:#fff; padding:6px 12px; border-radius:6px;">
          해당절읽음
        </button>
      </div>

      <!-- 통계 -->
      <div id="myStats">—</div>
      <ul id="leaderList"></ul>
    </main>
  </section>

  <!-- 오른쪽 고정 FAB 버튼 -->
  <div id="fabDock"
       style="position:fixed; right:16px; bottom:24px; z-index:9999; display:flex; flex-direction:column; gap:12px;">
    <button id="btnPrevVerse" class="fab" aria-label="이전 절">⟨</button>
    <button id="btnToggleMic" class="fab primary" aria-label="마이크 토글">🎙️</button>
    <button id="btnNextVerse" class="fab" aria-label="다음 절">⟩</button>
  </div>

  <!-- 진행현황 매트릭스 -->
  <div id="matrixModal" class="modal hidden">
    <div class="modal-body">
      <button id="btnCloseMatrix">닫기</button>
      <div id="matrixWrap"></div>
    </div>
  </div>
</body>
</html>
