<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>말씀읽기APP</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#10183a">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <link rel="stylesheet" href="styles.css"/>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore-compat.js"></script>

  <!-- 앱 코드 -->
  <script src="books.js" defer></script>
  <script src="firebaseConfig.js" defer></script>
  <script src="app.js" defer></script>
</head>
<body>

  <!-- A. 로그인 화면 (초기 표시) -->
  <section id="screen-login" class="screen show">
    <div class="hero">
      <div class="glow"></div>
      <div class="login-card">
        <div class="login-head">
          <div class="logo-hero">📖</div>
          <h1>말씀읽기APP</h1>
          <p class="muted">개역개정 · bible.json 기반</p>
        </div>

        <div class="login-body">
          <label class="form-label" for="displayName">표시이름</label>
          <input id="displayName" class="input" type="text" placeholder="예: 홍길동" autocomplete="name"/>

          <label class="form-label mt12" for="phoneLocal">전화번호 (국가번호 없이)</label>
          <!-- 항상 국내 형식: 010-1234-5678 처럼 입력 -->
          <input id="phoneLocal" class="input" type="tel" inputmode="tel" autocomplete="tel"
                 placeholder="010-1234-5678"/>

          <!-- ⬇️ '인증코드 받기' / reCAPTCHA / 코드 입력 영역 제거 -->
          <button id="btnLogin" class="btn primary fill mt16">시작하기</button>
        </div>

        <div class="login-foot muted">
          <small>로그인 후 읽기 진도와 순위가 저장됩니다.</small>
        </div>
      </div>
    </div>
  </section>

  <!-- B. 본화면 (로그인 후 전환) -->
  <section id="screen-app" class="screen">
    <header class="appbar">
      <div class="brand"><span class="logo">📖</span><strong>말씀읽기</strong></div>
      <div id="signedIn" class="userbox hidden">
        <img id="userPhoto" class="avatar" alt="avatar"/>
        <span id="userName"></span>
        <button id="btnSignOut" class="btn small danger">로그아웃</button>
      </div>
    </header>

    <main class="container">
      <section class="card">
        <details open>
          <summary>성경(66권) 선택</summary>
          <div class="field-row">
            <label for="bookSelect" class="form-label">성경</label>
            <select id="bookSelect" class="select"></select>
          </div>
        </details>

        <details class="mt12">
          <summary>장 선택</summary>
          <div id="chapterGrid" class="grid"></div>
        </details>

        <details class="mt12">
          <summary>절 선택</summary>
          <div id="verseGrid" class="grid small"></div>
        </details>
      </section>

      <section class="card">
        <div class="reader-head">
          <div>
            <div id="locLabel" class="loc"></div>
            <div id="verseCount" class="muted"></div>
          </div>
        </div>
        <div id="verseContainer" class="verse-container">
          <div id="verseText" class="verse-text">성경/장/절을 선택하세요.</div>
          <div id="listenHint" class="muted sm">음성 인식으로 읽으면 글자가 채워집니다.</div>
        </div>
        <div class="row between stats">
          <strong id="myStats">—</strong>
          <label class="muted"><input type="checkbox" id="autoAdvance" checked/> 절 완료 시 자동 이동</label>
        </div>
      </section>

      <section class="card">
        <h3>📈 읽기 순위</h3>
        <ol id="leaderList" class="leaders"></ol>
      </section>
    </main>

    <!-- 조작 FAB -->
    <div class="fab-col">
      <button id="btnPrevVerse" class="fab" aria-label="이전 절">⟨</button>
      <button id="btnToggleMic" class="fab primary" aria-label="음성 인식">🎙️</button>
      <button id="btnNextVerse" class="fab" aria-label="다음 절">⟩</button>
    </div>

    <!-- 현황표 모달 -->
    <div id="matrixModal" class="modal hidden">
      <div class="modal-body full">
        <div class="row between">
          <h3>읽기 현황표</h3>
          <button id="btnCloseMatrix" class="btn small" type="button">닫기</button>
        </div>
        <div id="matrixWrap" class="matrix-wrap"></div>
        <div class="muted smallprint">* 초록=완독 장, 회색=미완료 (가로 스크롤 가능)</div>
      </div>
    </div>
  </section>

</body>
</html>
